function initSpotfront(e){function t(e,t,r,s,a){doT.templateSettings.interpolate=/#\{=([\s\S]+?)\}#/g,doT.templateSettings.iterate=/#\{~\s*(?:\}#|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}#)/g,doT.templateSettings.conditional=/\#\{\?(\?)?\s*([\s\S]*?)\s*\}\#/g;for(var i="",l=0;l!=e.length;l++){var n=e[l],o=$("#spotfront-products-list").text();i+=doT.template(o)(n)}"before"===r&&prependAtPosition(i,t,r),"after"===r&&appendAtPosition(i,t,r),"inside"===r&&renderInside(i,t),"instead"===r&&renderInstead(i,t,r),s&&$(a).show()}function r(e){doT.templateSettings.interpolate=/#\{=([\s\S]+?)\}#/g,doT.templateSettings.iterate=/#\{~\s*(?:\}#|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}#)/g,doT.templateSettings.conditional=/\#\{\?(\?)?\s*([\s\S]*?)\s*\}\#/g;for(var t="",r=0;r!=e.length;r++){var s=e[r],a=$("#spotfront-products-list").text();t+=doT.template(a)(s)}return t}function s(e){var t=e,r=[];if(Array.isArray(t))for(var s=0;s!=t.length;s++)t[s].sponsored&&r.push(t[s]);else t.sponsored&&r.push(t);return r}var a=e.slot||1210,i=e.categories||["home"],l=e.isHome||!1,n=e.amount||1,o=e.DOMTarget,c=e.renderPosition||"inside",u=e.isHidden||!1,d=e.hiddenElement||e.DOMTarget,b=e.imageSize||220,p=e.customCallback||function(){},g=e.returnData||!1,f=e.returnDataType||"json",v=e.ratingBase||10,m=e.ratingNewBase||5,h=e.premiumPrice||25,S=["deliveryDate","availability","idArticle"],y="";l||(i=removeSpotFrontRequestCategories(i,"home")),i=cleanCategoriesStringsInArray(i);TagDeliveryContent.request({slot:a,targets:{category:i},count:n},function(e){0!=e.length&&0!=(e=s(e)).length&&(e=cleanSpotfrontObjetURLs(e),e=cleanSpotfrontObjetStrings(e),e=addPricesByType(e),e=addImageSize(e,b),e=changeRatingBase(e,v,m),e=disponibilityToString(e),e=checkOfferPrice(e),e=checkIfArticlesArePremium(e,h),e=requestAdditionalParameters(e,S,function(s){if(g)return"json"===f&&(y=e),"html"===f&&(y=r(e)),y;t(s,o,c,u,d),p()}))})}function cleanCategoriesStringsInArray(e){for(var t=e,r=[],s=0;s!==t.length;s++)r.push(removeDiacritics(t[s]).toLowerCase().replaceAll(" ","-").replaceAll("/","-"));return r}function replaceCategoryInArray(e,t,r){for(var s=e,a=0,i=s.length;a!=i;a++)s[a]===t&&(s[a]=r);return s}function removeSpotFrontRequestCategories(e,t){for(var r=e,s=0;s!=r.length;s++)removeDiacritics(r[s]).toLowerCase().replace(" ","-")==removeDiacritics(t).toLowerCase().replace(" ","-")&&r.splice(s,1);return r}function cleanSpotfrontObjetURLs(e){for(var t=window.location.href.split("/"),r=t[0]+"//"+t[2],s=e,a=0;a!=s.length;a++){var i=s[a].product.landingPageUrl.split("/");i=r+"/"+(i=i[i.length-1]),s[a].product.landingPageUrl=i}return s}function cleanSpotfrontObjetStrings(e){for(var t=e,r=0;r!=t.length;r++){var s=t[r].product.name.replace('"',"&quot;");t[r].product.name=s}return t}function addPricesByType(e){for(var t=e,r=0;r!=t.length;r++){var s=t[r].product.priceCurrent.toString().split(".");t[r].product.priceIntegerPart=s[0],s.length>1?t[r].product.priceDecimalPart=s[1]:t[r].product.priceDecimalPart="00"}return t}function addImageSize(e,t){for(var r=e,s=0;s!=r.length;s++){var a=r[s].product.imageSmall.replace("44-44",t+"-"+t);r[s].product.imageCardSize=a}return r}function changeRatingBase(e,t,r){for(var s=e,a=0;a!=s.length;a++){var i=s[a].product.media_valoraciones;i=i/t*r,s[a].product.media_valoraciones=i}return s}function disponibilityToString(e){for(var t=e,r=0;r!=t.length;r++)t[r].product.available?(t[r].product.availabilityString="in stock",t[r].product.disponibilityStringClass="disponibilidad-inmediata"):(t[r].product.availabilityString="out of stock",t[r].product.disponibilityStringClass="");return t}function checkOfferPrice(e){for(var t=e,r=0;r!=t.length;r++)t[r].product.salePrice&&(t[r].product.price=t[r].product.salePrice);return t}function checkIfArticlesArePremium(e,t){for(var r=e,s=0;s!=r.length;s++)r[s].product.priceCurrent>=t?r[s].product.isPremium=!0:r[s].product.isPremium=!1;return r}function requestAdditionalParameters(e,t,r){for(var s=window.location.href.split("/"),a=s[0]+"//"+s[2]+"/ajax_nc/get?idArticle=",i="keyName="+t.toString(),l=e,n=[],o=0;o!=l.length;o++)n.push(l[o].product_id);n=n.toString(),$.ajax({url:a+n+"&"+i,data:{},dataType:"json",async:!0,method:"get",crossDomain:!0,cache:!1,success:function(e){e=objectValues(e);for(var t=0;t!=e.length;t++)for(var s=0;s!=l.length;s++)if(l[s].product_id==e[t].idArticle){l[s].product.deliveryDate=e[t].deliveryDate.strDeliveryDate;break}r(l)}})}function prependAtPosition(e,t,r){var s=t;$(s).before(e)}function appendAtPosition(e,t,r){var s=t;$(s).after(e)}function renderInside(e,t){$(t).html(e)}function renderInstead(e,t,r){$(t).contents();$(t).replaceWith(e)}function removeDiacritics(e){if(void 0!==e)return e.replace(/[^\u0000-\u007E]/g,function(e){return diacriticsMap[e]||e})}function objectValues(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)};for(var defaultDiacriticsRemovalMap=[{base:"A",letters:"Aâ’¶ï¼¡Ã€Ã?Ã‚áº¦áº¤áºªáº¨ÃƒÄ€Ä‚áº°áº®áº´áº²È¦Ç Ã„Çžáº¢Ã…ÇºÇ?È€È‚áº áº¬áº¶á¸€Ä„Èºâ±¯"},{base:"AA",letters:"êœ²"},{base:"AE",letters:"Ã†Ç¼Ç¢"},{base:"AO",letters:"êœ´"},{base:"AU",letters:"êœ¶"},{base:"AV",letters:"êœ¸êœº"},{base:"AY",letters:"êœ¼"},{base:"B",letters:"Bâ’·ï¼¢á¸‚á¸„á¸†ÉƒÆ‚Æ?"},{base:"C",letters:"Câ’¸ï¼£Ä†ÄˆÄŠÄŒÃ‡á¸ˆÆ‡È»êœ¾"},{base:"D",letters:"Dâ’¹ï¼¤á¸ŠÄŽá¸Œá¸?á¸’á¸ŽÄ?Æ‹ÆŠÆ‰ê?¹Ã?"},{base:"DZ",letters:"Ç±Ç„"},{base:"Dz",letters:"Ç²Ç…"},{base:"E",letters:"Eâ’ºï¼¥ÃˆÃ‰ÃŠá»€áº¾á»„á»‚áº¼Ä’á¸”á¸–Ä”Ä–Ã‹áººÄšÈ„È†áº¸á»†È¨á¸œÄ˜á¸˜á¸šÆ?ÆŽ"},{base:"F",letters:"Fâ’»ï¼¦á¸žÆ‘ê?»"},{base:"G",letters:"Gâ’¼ï¼§Ç´Äœá¸ ÄžÄ Ç¦Ä¢Ç¤Æ“êž ê?½ê?¾"},{base:"H",letters:"Hâ’½ï¼¨Ä¤á¸¢á¸¦Èžá¸¤á¸¨á¸ªÄ¦â±§â±µêž?"},{base:"I",letters:"Iâ’¾ï¼©ÃŒÃ?ÃŽÄ¨ÄªÄ¬Ä°Ã?á¸®á»ˆÇ?ÈˆÈŠá»ŠÄ®á¸¬Æ—"},{base:"J",letters:"Jâ’¿ï¼ªÄ´Éˆ"},{base:"K",letters:"Kâ“€ï¼«á¸°Ç¨á¸²Ä¶á¸´Æ˜â±©ê?€ê?‚ê?„êž¢"},{base:"L",letters:"Lâ“?ï¼¬Ä¿Ä¹Ä½á¸¶á¸¸Ä»á¸¼á¸ºÅ?È½â±¢â± ê?ˆê?†êž€"},{base:"LJ",letters:"Ç‡"},{base:"Lj",letters:"Çˆ"},{base:"M",letters:"Mâ“‚ï¼­á¸¾á¹€á¹‚â±®Æœ"},{base:"N",letters:"Nâ“ƒï¼®Ç¸ÅƒÃ‘á¹„Å‡á¹†Å…á¹Šá¹ˆÈ Æ?êž?êž¤"},{base:"NJ",letters:"ÇŠ"},{base:"Nj",letters:"Ç‹"},{base:"O",letters:"Oâ“„ï¼¯Ã’Ã“Ã”á»’á»?á»–á»”Ã•á¹ŒÈ¬á¹ŽÅŒá¹?á¹’ÅŽÈ®È°Ã–Èªá»ŽÅ?Ç‘ÈŒÈŽÆ á»œá»šá» á»žá»¢á»Œá»˜ÇªÇ¬Ã˜Ç¾Æ†ÆŸê?Šê?Œ"},{base:"OI",letters:"Æ¢"},{base:"OO",letters:"ê?Ž"},{base:"OU",letters:"È¢"},{base:"OE",letters:"ÂŒÅ’"},{base:"oe",letters:"ÂœÅ“"},{base:"P",letters:"Pâ“…ï¼°á¹”á¹–Æ¤â±£ê??ê?’ê?”"},{base:"Q",letters:"Qâ“†ï¼±ê?–ê?˜ÉŠ"},{base:"R",letters:"Râ“‡ï¼²Å”á¹˜Å˜È?È’á¹šá¹œÅ–á¹žÉŒâ±¤ê?šêž¦êž‚"},{base:"S",letters:"Sâ“ˆï¼³áºžÅšá¹¤Åœá¹ Å á¹¦á¹¢á¹¨È˜Åžâ±¾êž¨êž„"},{base:"T",letters:"Tâ“‰ï¼´á¹ªÅ¤á¹¬ÈšÅ¢á¹°á¹®Å¦Æ¬Æ®È¾êž†"},{base:"TZ",letters:"êœ¨"},{base:"U",letters:"Uâ“Šï¼µÃ™ÃšÃ›Å¨á¹¸Åªá¹ºÅ¬ÃœÇ›Ç—Ç•Ç™á»¦Å®Å°Ç“È”È–Æ¯á»ªá»¨á»®á»¬á»°á»¤á¹²Å²á¹¶á¹´É„"},{base:"V",letters:"Vâ“‹ï¼¶á¹¼á¹¾Æ²ê?žÉ…"},{base:"VY",letters:"ê? "},{base:"W",letters:"Wâ“Œï¼·áº€áº‚Å´áº†áº„áºˆâ±²"},{base:"X",letters:"Xâ“?ï¼¸áºŠáºŒ"},{base:"Y",letters:"Yâ“Žï¼¹á»²Ã?Å¶á»¸È²áºŽÅ¸á»¶á»´Æ³ÉŽá»¾"},{base:"Z",letters:"Zâ“?ï¼ºÅ¹áº?Å»Å½áº’áº”ÆµÈ¤â±¿â±«ê?¢"},{base:"a",letters:"aâ“?ï½?áºšÃ Ã¡Ã¢áº§áº¥áº«áº©Ã£Ä?Äƒáº±áº¯áºµáº³È§Ç¡Ã¤ÇŸáº£Ã¥Ç»ÇŽÈ?Èƒáº¡áº­áº·á¸?Ä…â±¥É?"},{base:"aa",letters:"êœ³"},{base:"ae",letters:"Ã¦Ç½Ç£"},{base:"ao",letters:"êœµ"},{base:"au",letters:"êœ·"},{base:"av",letters:"êœ¹êœ»"},{base:"ay",letters:"êœ½"},{base:"b",letters:"bâ“‘ï½‚á¸ƒá¸…á¸‡Æ€ÆƒÉ“"},{base:"c",letters:"câ“’ï½ƒÄ‡Ä‰Ä‹Ä?Ã§á¸‰ÆˆÈ¼êœ¿â†„"},{base:"d",letters:"dâ““ï½„á¸‹Ä?á¸?á¸‘á¸“á¸?Ä‘ÆŒÉ–É—ê?º"},{base:"dz",letters:"Ç³Ç†"},{base:"e",letters:"eâ“”ï½…Ã¨Ã©Ãªá»?áº¿á»…á»ƒáº½Ä“á¸•á¸—Ä•Ä—Ã«áº»Ä›È…È‡áº¹á»‡È©á¸?Ä™á¸™á¸›É‡É›Ç?"},{base:"f",letters:"fâ“•ï½†á¸ŸÆ’ê?¼"},{base:"g",letters:"gâ“–ï½‡ÇµÄ?á¸¡ÄŸÄ¡Ç§Ä£Ç¥É êž¡áµ¹ê?¿"},{base:"h",letters:"hâ“—ï½ˆÄ¥á¸£á¸§ÈŸá¸¥á¸©á¸«áº–Ä§â±¨â±¶É¥"},{base:"hv",letters:"Æ•"},{base:"i",letters:"iâ“˜ï½‰Ã¬Ã­Ã®Ä©Ä«Ä­Ã¯á¸¯á»‰Ç?È‰È‹á»‹Ä¯á¸­É¨Ä±"},{base:"j",letters:"jâ“™ï½ŠÄµÇ°É‰"},{base:"k",letters:"kâ“šï½‹á¸±Ç©á¸³Ä·á¸µÆ™â±ªê??ê?ƒê?…êž£"},{base:"l",letters:"lâ“›ï½ŒÅ€ÄºÄ¾á¸·á¸¹Ä¼á¸½á¸»Å¿Å‚ÆšÉ«â±¡ê?‰êž?ê?‡"},{base:"lj",letters:"Ç‰"},{base:"m",letters:"mâ“œï½?á¸¿á¹?á¹ƒÉ±É¯"},{base:"n",letters:"nâ“?ï½ŽÇ¹Å„Ã±á¹…Åˆá¹‡Å†á¹‹á¹‰ÆžÉ²Å‰êž‘êž¥"},{base:"nj",letters:"ÇŒ"},{base:"o",letters:"oâ“žï½?Ã²Ã³Ã´á»“á»‘á»—á»•Ãµá¹?È­á¹?Å?á¹‘á¹“Å?È¯È±Ã¶È«á»?Å‘Ç’È?È?Æ¡á»?á»›á»¡á»Ÿá»£á»?á»™Ç«Ç­Ã¸Ç¿É”ê?‹ê??Éµ"},{base:"oi",letters:"Æ£"},{base:"ou",letters:"È£"},{base:"oo",letters:"ê??"},{base:"p",letters:"pâ“Ÿï½?á¹•á¹—Æ¥áµ½ê?‘ê?“ê?•"},{base:"q",letters:"qâ“ ï½‘É‹ê?—ê?™"},{base:"r",letters:"râ“¡ï½’Å•á¹™Å™È‘È“á¹›á¹?Å—á¹ŸÉ?É½ê?›êž§êžƒ"},{base:"s",letters:"sâ“¢ï½“ÃŸÅ›á¹¥Å?á¹¡Å¡á¹§á¹£á¹©È™ÅŸÈ¿êž©êž…áº›"},{base:"t",letters:"tâ“£ï½”á¹«áº—Å¥á¹­È›Å£á¹±á¹¯Å§Æ­Êˆâ±¦êž‡"},{base:"tz",letters:"êœ©"},{base:"u",letters:"uâ“¤ï½•Ã¹ÃºÃ»Å©á¹¹Å«á¹»Å­Ã¼ÇœÇ˜Ç–Çšá»§Å¯Å±Ç”È•È—Æ°á»«á»©á»¯á»­á»±á»¥á¹³Å³á¹·á¹µÊ‰"},{base:"v",letters:"vâ“¥ï½–á¹½á¹¿Ê‹ê?ŸÊŒ"},{base:"vy",letters:"ê?¡"},{base:"w",letters:"wâ“¦ï½—áº?áºƒÅµáº‡áº…áº˜áº‰â±³"},{base:"x",letters:"xâ“§ï½˜áº‹áº?"},{base:"y",letters:"yâ“¨ï½™á»³Ã½Å·á»¹È³áº?Ã¿á»·áº™á»µÆ´É?á»¿"},{base:"z",letters:"zâ“©ï½šÅºáº‘Å¼Å¾áº“áº•Æ¶È¥É€â±¬ê?£"}],diacriticsMap={},i=0;i<defaultDiacriticsRemovalMap.length;i++)for(var letters=defaultDiacriticsRemovalMap[i].letters,j=0;j<letters.length;j++)diacriticsMap[letters[j]]=defaultDiacriticsRemovalMap[i].base;

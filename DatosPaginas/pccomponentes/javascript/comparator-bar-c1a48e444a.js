$(document).ready(function(){function t(){var t=[];if($(".navegacion-secundaria__migas-de-pan .GTM-breadcumb:last-child").length){var e=$(".navegacion-secundaria__migas-de-pan .GTM-breadcumb:last-child").attr("href").split("/");e=e[e.length-1];for(var r=0;r!=l.length;r++)l[r].lastFamily==e&&t.push(l[r].id);0!=t.length&&a(t)}}function a(t){for(var a=0;a!=t.length;a++)$('[content="'+t[a]+'"]').parent().find(".js-comparator-check-trigger").prop("checked",!0)}function e(t,a,e,r,c){var n={id:t,articleName:a,articleImg:e,articleURL:r,lastFamily:c};t&&(l.push(n),l=o(l),s=c,localStorage.setItem("comparatorIds",JSON.stringify(l)),localStorage.setItem("lastFamily",JSON.stringify(s)),i(l))}function r(t){if(t){for(var a=0;a<l.length;a++)if(l[a].id==t){l.splice(a,1);break}l=o(l),localStorage.setItem("comparatorIds",JSON.stringify(l)),s=0!=l.length?l[l.length-1].lastFamily:[],localStorage.setItem("lastFamily",JSON.stringify(s)),i(l)}}function c(){l=[],localStorage.setItem("comparatorIds",JSON.stringify(l)),s=[],localStorage.setItem("lastFamily",JSON.stringify(s)),i(l)}function i(t){for(var a=t,e="",r=0;r!=a.length;r++)e+='<li class="c-comparator__selected-list-item"><i class="c-close c-close--comparator-mini-card js-close--comparator-bottom-sticky" data-id='+a[r].id+'></i><figure class="c-comparator-card c-comparator-card--mini"><a href="'+a[r].articleURL+'"><img class="c-comparator-cell__img c-comparator-cell__img--selected" alt="#" src="'+a[r].articleImg+'"></a><figcaption class="c-comparator-cell__title c-comparator-cell__title--selected"><a href="'+a[r].articleURL+'">'+a[r].articleName+"</a></figcaption></figure></li>";0==a.length&&$(".js-sticky-selected").hide(),a.length<2?$(".js-comparator-compare-button").prop("disabled",!0):$(".js-comparator-compare-button").prop("disabled",!1),$(".js-comparator__trigger-quantity").html(a.length),$(".js-comparator__selected-list").html(e).css("width",196*$(".js-comparator__selected-list").find(".c-comparator__selected-list-item").length)}function o(t,a){var e=function(t,a){return t.id==a.id?t.articleName<a.articleName?-1:t.articleName>a.articleName?1:0:t.id<a.id?-1:1};t.sort(e);for(var r=0;r<t.length-1;++r)0===e(t[r],t[r+1])&&t.splice(r,1);return t}var l=[],s=[];!function(){var t;localStorage.getItem("comparatorIds")&&0!=JSON.parse(localStorage.getItem("comparatorIds")).length?(t=localStorage.getItem("comparatorIds"),i(l=o(JSON.parse(t),"id")),$(".js-sticky-selected").show()):$(".js-sticky-selected").hide()}(),t(),$(document).on("change",".js-comparator-check-trigger",function(){var t=$(this).is(":checked"),a=$(this).parents(".tarjeta-articulo").find('[itemprop="sku"]').first().attr("content"),c=$(this).parents(".tarjeta-articulo").children().find(".tarjeta-articulo__foto img").first().attr("src"),i=$(this).parents(".tarjeta-articulo").children().find(".enlace-disimulado").first().data("name"),o=$(this).parents(".tarjeta-articulo").find('[itemprop="url"]').first().attr("href"),l=$(".navegacion-secundaria__migas-de-pan .GTM-breadcumb:last-child").attr("href").split("/");l=l[l.length-1],t?(e(a,i,c,o,l),$(".js-sticky-selected").show()):r(a)}),$(document).on("click",".js-close--comparator-bottom-sticky",function(){r($(this).data("id")),$(this).parents(".c-comparator__selected-list-item").fadeOut()}),$(document).on("click",".c-comparator-tool-link--remove-all",function(){c(),$("input:checkbox.js-comparator-check-trigger").prop("checked",!1),$(".js-sticky-selected").hide()}),$(".c-comparator__slider-prev").click(function(){$(".c-comparator__selected-list-holder").animate({scrollLeft:"-=196"},200,"linear")}),$(".c-comparator__slider-next").click(function(){$(".c-comparator__selected-list-holder").animate({scrollLeft:"+=196"},200,"linear")}),$(".js-comparator-bar-close").click(function(){$(this).parents(".js-sticky-selected").fadeOut()}),$(".js-comparator-compare-button").click(function(){location.port||location.protocol;window.location.href=window.location=window.location.pathname+"/comparador"});var n=document.querySelector("#articleListContent");if(n&&"undefined"!=typeof MutationObserver){var m={attributes:!1,childList:!0,characterData:!1};new MutationObserver(function(a){a.forEach(function(a){"childList"==a.type&&t()})}).observe(n,m)}});
